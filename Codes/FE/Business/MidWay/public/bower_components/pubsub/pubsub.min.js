(function(c,h){var f={};c.PubSub=f;c=c.define;h(f);"function"===typeof c&&c.amd?c(function(){return f}):"object"===typeof exports&&(void 0!==module&&module.exports&&(exports=module.exports=f),exports.PubSub=f,module.exports=exports=f)})("object"===typeof window&&window||this,function(c){function h(a){for(var b in a)if(a.hasOwnProperty(b))return!0;return!1}function f(a){return function(){throw a;}}function p(a,b,c){try{a(b,c)}catch(d){setTimeout(f(d),0)}}function q(a,b,c){a(b,c)}function m(a,b,c,d){var l=
    e[b];d=d?q:p;var g;if(e.hasOwnProperty(b))for(g in l)l.hasOwnProperty(g)&&d(l[g],a,c)}function r(a,b,c){return function(){var d=String(a),e=d.lastIndexOf(".");for(m(a,a,b,c);-1!==e;)d=d.substr(0,e),e=d.lastIndexOf("."),m(a,d,b,c)}}function n(a,b,c,d){b=r(a,b,d);a=String(a);d=!(!e.hasOwnProperty(a)||!h(e[a]));for(var g=a.lastIndexOf(".");!d&&-1!==g;)a=a.substr(0,g),g=a.lastIndexOf("."),d=!(!e.hasOwnProperty(a)||!h(e[a]));if(!d)return!1;!0===c?b():setTimeout(b,0);return!0}var e={},t=-1;c.publish=function(a,
    b){return n(a,b,!1,c.immediateExceptions)};c.publishSync=function(a,b){return n(a,b,!0,c.immediateExceptions)};c.subscribe=function(a,b){if("function"!==typeof b)return!1;e.hasOwnProperty(a)||(e[a]={});var c="uid_"+String(++t);e[a][c]=b;return c};c.subscribeOnce=function(a,b){var e=c.subscribe(a,function(){c.unsubscribe(e);b.apply(this,arguments)});return c};c.clearAllSubscriptions=function(){e={}};c.clearSubscriptions=function(a){for(var b in e)e.hasOwnProperty(b)&&0===b.indexOf(a)&&delete e[b]};
    c.unsubscribe=function(a){var b;if((b="string"===typeof a)&&!(b=e.hasOwnProperty(a)))a:{for(var g in e)if(e.hasOwnProperty(g)&&0===g.indexOf(a)){b=!0;break a}b=!1}var d=b;g=!d&&"string"===typeof a;b="function"===typeof a;var f=!1,h,k;if(d)c.clearSubscriptions(a);else{for(h in e)if(e.hasOwnProperty(h)){d=e[h];if(g&&d[a]){delete d[a];f=a;break}if(b)for(k in d)d.hasOwnProperty(k)&&d[k]===a&&(delete d[k],f=!0)}return f}}});