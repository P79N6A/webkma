<template>
	<div class="bussiness-list">
    <el-row class="operation">
      <el-button type="primary">新增商家账户</el-button>
      <el-button type="success">导出商家数据</el-button>
      <search  :placeholder="searchOpt.placeholder"
                  @searchHandler="searchHander"
                  :style="{ width: (searchOpt.size || '220px')}"
                    ></search>
    </el-row>
		<el-table
              ref="bussinessTable"
              :data="bussinessList"
              tooltip-effect="dark"
              row-key="id"
              class="table"
              header-row-class-name="table-header"
              header-cell-class-name="table-header"
            >
              <el-table-column
                show-overflow-tooltip
                prop="businessPhone"
                label="账号"
                align="center"
                class-name="number_color"
                width="95"
              ></el-table-column>
              <el-table-column
                show-overflow-tooltip
                prop="businessName"
                label="商家名称"
                align="center"
                class-name="number_color"
                width="95"
              ></el-table-column>
              <el-table-column
                prop="versionName"
                label="版本名称"
                align="center"
                class-name="number_color"
                width
              ></el-table-column>
              <el-table-column
                prop="createtime"
                label="创建时间"
                align="center"
                sortable="custom"
                class-name="number_color"
                show-overflow-tooltip
              ></el-table-column>
              <el-table-column
                prop=""
                label="商家状态"
                align="center"
                width="80"
                show-overflow-tooltip
              >
                <template slot-scope="scope">
                  <slideBtn :slideBtnOpt="scope.row" @slide-event="setSingleState"/>
                </template>
              </el-table-column>
              <el-table-column
                prop="address"
                label="操作"
                align="center"
                width="95"
                show-overflow-tooltip
              >
                <template slot-scope="scope">
                  <p><i class="btn-plain" @click="edit(scope.row)">详情</i></p>
                </template>
              </el-table-column>
            </el-table>
            <div style="margin:10px 10px 0 0;">
              <pagination
                v-if="paginationOpt.pageCount > 1"
                class="pull-right"
                :paginationOpt="paginationOpt"
                @switchPage="pagesFn"
              />
            </div>
	</div>
</template>
<script scope>
import api from "../axios/api-service";
import search from "../components/com-search";
import pagination from "../components/ui-pagination";
export default {
  name:'bussiness-list',
  components: { search, pagination },
	data() {
		return {
      bussinessList: [], //商家列表数据
      businesskeyword: '', //关键词
      searchOpt: {
        placeholder: '请输入账号、公司名'
      },
      paginationOpt: {
        pageIndex: 1,
        pageCount: 2,
        pageSize: 15

      }
		}
  },
  mounted(){
    
    // this.getList();
  },
  methods: {
    getList() {
      let _this = this;
      let _option = {
        businessType: 1,
        businesskeyword: this.businesskeyword,//可空，模糊查询内如可是用户名，公司名称
        pageIndex: this.paginationOpt.pageIndex,//开始条数，不可空，正整数
        pageSize: this.paginationOpt.pageSize//取用条数，不可空，正整数
      }
      api.request("getBussinessList", _option, result => {
        if (result.status == 0) {
          _this.bussinessList = result.data.map(item => {
            item.isEdit = false;
            return item;
          });
        } else {
          this.message.error('环境的设计等级考试');
        }
        !!cb && cb();
      });
    },  
    pagesFn() {

    },
    //搜索
    searchHander() {

    },
    //编辑
    edit() {

    },
    //设置状态
    setSingleState(data) {
      let _option = {
        ids: [],
        state: data.state
      };
      _option.ids.push(data.id);
      // this.setEmployeeState(_option);
    }
  }
}
</script>
<style scope>
.operation {
  height: 60px;
  line-height: 60px;
  padding: 0 10px;
}
</style>


