window.__require=function e(t,n,o){function i(s,a){if(!n[s]){if(!t[s]){var r=s.split("/");if(r=r[r.length-1],!t[r]){var u="function"==typeof __require&&__require;if(!a&&u)return u(r,!0);if(c)return c(r,!0);throw new Error("Cannot find module '"+s+"'")}}var d=n[s]={exports:{}};t[s][0].call(d.exports,function(e){return i(t[s][1][e]||e)},d,d.exports,e,t,n,o)}return n[s].exports}for(var c="function"==typeof __require&&__require,s=0;s<o.length;s++)i(o[s]);return i}({Bullet:[function(e,t,n){"use strict";cc._RF.push(t,"7686fUAo81OcZA3nS0sEje3","Bullet"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){this.node.on("showResult",this.showResult,this)},onBeginContact:function(e,t,n){if(t.node.getComponent(cc.RigidBody).linearVelocity=cc.v2(0,0),t.enabled=!1,99==n.tag)return this.node.destroy()},animFinished:function(e,t){this.node.destroy()},showResult:function(e){var t=this.node.getComponent(cc.Animation);t.play("Fishnet"),e.score&&(this.node.getChildByName("Score").getComponent(cc.Label).string=e.score,this.node.getComponent(cc.Animation).playAdditive("FishnetScore")),t.on("finished",function(t,n){e.score&&"FishnetScore"!=n.name||this.node.destroy()},this)},update:function(e){this.node.getComponent(cc.RigidBody)}}),cc._RF.pop()},{}],Business:[function(e,t,n){"use strict";cc._RF.push(t,"291d5mua6pOxInnm19QS5pu","Business");var o=e("Config"),i=e("Request");t.exports={getGameSettings:function(e,t){i.get({url:o.apiHost+"activity/plugin/prize?relationId="+e.relationId+"&controlId="+e.controlId},function(e){t(null,{actStartDate:e.data.setting.actStartTime,actEndDate:e.data.setting.actEndTime,drawTotal:e.data.setting.drawTime,drawCount:e.data.setting.userDrawTime,status:e.data.setting.status,prizeList:e.data.prizes})})},drawPrize:function(e,t){i.post({url:o.apiHost+"activity/plugin/drawprize",data:{relationId:e.relationId,controlId:e.controlId}},function(e){var n=void 0,o=void 0;if(e instanceof Error)o=new Error("\u64cd\u4f5c\u5f02\u5e38");else switch(e.data.code){case 0:case 2:case 3:case 7:o=new Error("\u6d3b\u52a8\u5f02\u5e38\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\u3002"),console.log("\u6d3b\u52a8\u5f02\u5e38\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\u3002 Code: "+e.data.code);break;case 1:o=new Error("\u6b63\u5728\u53c2\u4e0e\u62bd\u5956\uff0c\u8bf7\u52ff\u53cd\u590d\u6267\u884c");break;case 5:o=new Error("\u60a8\u7684\u62bd\u5956\u6b21\u6570\u5df2\u7ecf\u7528\u5b8c\u4e86");break;case 10:o=new Error("\u6d3b\u52a8\u5c1a\u672a\u5f00\u59cb\uff0c\u8bf7\u7a0d\u540e\u518d\u6765");break;case 4:case 6:case 8:case 9:n={status:!1};break;case 200:n={status:!0,level:"\u4e00\u7b49\u5956",name:"Apple iPhone X 256GB \u9ed1\u8272\u4e00\u90e8"}}t(o,n)})},getLayerResultPrefab:function(e,t){var n=void 0;switch(e){case"red":n="LayerResult_Red"}cc.loader.loadRes("LayerResult/Themes/"+n,function(e,n){e||n instanceof cc.Prefab||(e=new Error("\u4e3b\u9898\u9884\u5236\u4ef6\u4e0d\u5b58\u5728")),t(e,n)})}},cc._RF.pop()},{Config:"Config",Request:"Request"}],Config:[function(e,t,n){"use strict";cc._RF.push(t,"a2ad417OjhCBKQbv8jDk+6L","Config");var o={apiHost:"http://api.kma.dev.cn/"};window&&window.config&&(o=window.config),t.exports=o,cc._RF.pop()},{}],EggsContainerForce:[function(e,t,n){"use strict";cc._RF.push(t,"e315cJv83NI2YLnVIiWJ2/0","EggsContainerForce"),cc.Class({extends:cc.Component,properties:{},start:function(){},onBeginContact:function(e,t,n){var o=Math.random()>.5?1:-1;n.body.linearVelocity=cc.v2(100*Math.random()*o,2800)}}),cc._RF.pop()},{}],FishingJoy:[function(e,t,n){"use strict";cc._RF.push(t,"04fc7v2cZxA25mUr2pXgDyJ","FishingJoy");e("Business");cc.Class({extends:cc.Component,properties:{bullet:{default:null,type:cc.Prefab},fish1:{default:null,type:cc.Prefab},fish2:{default:null,type:cc.Prefab},fish3:{default:null,type:cc.Prefab},fish4:{default:null,type:cc.Prefab},fish5:{default:null,type:cc.Prefab},startNode:{default:null,type:cc.Node},playNode:{default:null,type:cc.Node},actorNode:{default:null,type:cc.Node},cannonNode:{default:null,type:cc.Node},scoreNode:{default:null,type:cc.Node},timerNode:{default:null,type:cc.Node},_timer:{default:null,type:cc.Integer}},onLoad:function(){cc.director.getPhysicsManager().enabled=!0},start:function(){var e=this;e.node.on("addScore",e.addScore,e),e.node.on(cc.Node.EventType.TOUCH_START,function(t){var n=t.getLocation(),o=cc.v2(320,0),i=n.sub(o),c=Math.atan2(i.y,i.x)/Math.PI*180,s=90-c;e.cannonNode.getChildByName("Cannon").setRotation(s);var a=cc.instantiate(e.bullet);e.actorNode.addChild(a),a.position=cc.v2(0,-500),a.setRotation(s),a.getComponent(cc.RigidBody).linearVelocity=cc.v2(250*Math.cos(c*(Math.PI/180)),250*Math.sin(c*(Math.PI/180)))},e),e.init()},init:function(){this._timer=60},gameStart:function(){var e=this;e.timerNode.getComponent(cc.Label);setInterval(function(){var t=Math.random();t<=.1?e.pushFish(e.fish1,{startY:120,rangeY:480,rate:.1,score:30}):t<=.25?e.pushFish(e.fish3,{startY:0,rangeY:480,rate:.25,score:25}):t<=.45?e.pushFish(e.fish2,{startY:-120,rangeY:480,rate:.4,score:20}):t<=.7?e.pushFish(e.fish4,{startY:-240,rangeY:480,rate:.6,score:15}):e.pushFish(e.fish5,{startY:-360,rangeY:480,rate:.8,score:10})},800)},pushFish:function(e,t){var n=cc.instantiate(e),o=Math.random()>.5?-1:1,i=cc.v2(480*o,t.startY+Math.random()*t.rangeY),c=cc.v2(480*-o,t.startY+Math.random()*t.rangeY).sub(i),s=Math.atan2(c.y,c.x)/Math.PI*180,a=180-s;n.position=i,n.setRotation(a),n.getChildByName("Sprite").setScale(cc.v2(1,o)),n.getComponent("Fish").init({rate:t.rate,score:t.score}),n.getComponent(cc.RigidBody).linearVelocity=cc.v2(100*Math.cos(s*(Math.PI/180)),100*Math.sin(s*(Math.PI/180))),this.actorNode.addChild(n)},btnStart:function(e){this.startNode.active=!1,this.playNode.active=!0,this.gameStart()},addScore:function(e){var t=this.scoreNode.getComponent(cc.Label);t.string=parseFloat(t.string)+parseFloat(e.detail.score),e.stopPropagation()}}),cc._RF.pop()},{Business:"Business"}],Fish:[function(e,t,n){"use strict";cc._RF.push(t,"fa81bE5kztO1pHEKESBDpmk","Fish"),cc.Class({extends:cc.Component,properties:{_rate:{default:0,type:cc.Float},_score:{default:0,type:cc.Integer}},init:function(e){this._rate=e.rate||1,this._score=e.score||1},onBeginContact:function(e,t,n){var o=this;if(99==n.tag)return o.node.destroy();if(Math.random()>o._rate){t.enabled=!1,o.node.getComponent(cc.RigidBody).linearVelocity=cc.v2(0,0),t.node.getComponent(cc.Animation).play().speed=3;var i={score:o._score},c=new cc.Event.EventCustom("addScore",!0);c.detail=i,o.node.dispatchEvent(c),n.node.emit("showResult",i),setTimeout(function(){cc.isValid(o.node)&&o.node.destroy()},600)}else n.node.emit("showResult",{})}}),cc._RF.pop()},{}],LayerResult:[function(e,t,n){"use strict";cc._RF.push(t,"d6efbdphsFKDr3o1qugPf1F","LayerResult"),cc.Class({extends:cc.Component,properties:{successLayer:{default:null,type:cc.Node},failedLayer:{default:null,type:cc.Node},_result:{default:null,type:cc.Object}},onLoad:function(){this.node.active=!1},start:function(){},show:function(e){this._result=e.result||null,this.node.active=!0,this.successLayer.active=!1,this.failedLayer.active=!1,this._result&&this._result.prize?(this.successLayer.active=!0,cc.find("Body/Title/Label",this.successLayer).getComponent(cc.Label).string=this._result.prize.name):this.failedLayer.active=!0},btnAction:function(e,t){switch(t){case"return":this.node.active=!1;break;case"subscribe":console.log("subscribe");break;case"submit":console.log("form submit")}}}),cc._RF.pop()},{}],LayerSubscribe:[function(e,t,n){"use strict";cc._RF.push(t,"548afeHkVVMVrLse0+lMWLX","LayerSubscribe");e("../Utils/Request");cc.Class({extends:cc.Component,properties:{qrCode:{default:null,type:cc.Node,displayName:"\u5c0f\u7a0b\u5e8f\u7801\u7cbe\u7075"}},onLoad:function(){},start:function(){var e=this;cc.loader.load("http://bos-kcmsdesign.iwanqi.cn/00000000-0000-0000-0000-000000000000/KMA/8cf84528-1c45-4d67-9d68-a4a56b2cfbde.jpg",function(t,n){if(t)return console.log(t);e.qrCode.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(n)})}}),cc._RF.pop()},{"../Utils/Request":"Request"}],LockyEggs:[function(e,t,n){"use strict";cc._RF.push(t,"02ae88k3UdDRJg4r9sYDIRM","LockyEggs");var o=e("Business");cc.Class({extends:cc.Component,properties:{egg:{default:null,type:cc.Prefab},_containerNode:{default:null,type:cc.Node},_layerResultNode:{default:null,type:cc.Node},_activitySettings:{default:null,type:cc.Object},_prize:{default:null,type:cc.Object},_status:{default:"",type:cc.String}},onLoad:function(){cc.director.getPhysicsManager().enabled=!0,this._containerNode=this.node.getChildByName("Background"),cc.find("Carrier/Prize",this._containerNode).getComponent(cc.Animation).on("finished",this.popupPrizeLayer,this),cc.find("LayerContext",this._containerNode).getComponent(cc.Animation).on("finished",this.showResult,this),this._status="loaded"},start:function(){for(var e=this,t=e._containerNode.getChildByName("EggsContainer"),n=0;n<18;){var i=cc.instantiate(e.egg);i.position=cc.v2(10*Math.random(),10*Math.random()),t.addChild(i),n++}o.getGameSettings({relationId:"11001180719000000015",controlId:"sjtest111"},function(t,n){if(t)return cc.error(t.message||t);e._activitySettings=n,e._activitySettings.theme="red",o.getLayerResultPrefab(e._activitySettings.theme,function(t,n){if(t)return cc.error(t.message||t);e._layerResultNode=cc.instantiate(n),e.node.addChild(e._layerResultNode),e._status="ready"}),e.setUIDetail()})},setUIDetail:function(){var e=void 0;switch(this._activitySettings.status){case 0:e="\u6d3b\u52a8\u672a\u5f00\u59cb";break;case 1:e="\u60a8\u5269\u4f59\u62bd\u5956\u6b21\u6570\uff1a"+this._activitySettings.drawCount+"\u6b21",this._activitySettings.drawCount>0&&(cc.find("ButtonStart",this._containerNode).getComponent(cc.Button).interactable=!0);break;case 2:e="\u6d3b\u52a8\u5df2\u7ed3\u675f"}cc.find("Carrier/Title",this._containerNode).getComponent(cc.Label).string=e},btnStart:function(e){var t=this,n=cc.find("EggsContainer/Force",t._containerNode),i=cc.find("Carrier/Prize",t._containerNode);"ready"==t._status&&(t._status="starting",t._activitySettings.drawCount--,t.setUIDetail(),Promise.all([new Promise(function(e,t){n.active=!0,setTimeout(function(){n.active=!1,e()},3e3)}),new Promise(function(e,n){o.drawPrize({relationId:"11001180719000000015",controlId:"sjtest111"},function(o,i){if(o)return n(o);t._prize=i,e()})})]).then(function(e){setTimeout(function(){i.getComponent(cc.Animation).play()},500)}).catch(function(e){return n.active=!1,t._status="ready",cc.error(e.message||e)}))},popupPrizeLayer:function(){var e=this._containerNode.getChildByName("LayerContext");e.getComponent(cc.Animation).play(),setTimeout(function(){e.active=!0},1)},showResult:function(){this._layerResultNode.getComponent("LayerResult").show({result:this._prize.status?{prize:{name:this._prize.name,level:this._prize.level}}:null}),this._containerNode.getChildByName("LayerContext").active=!1,this._status="ready"}}),cc._RF.pop()},{Business:"Business"}],Request:[function(e,t,n){"use strict";cc._RF.push(t,"1184eH/PZVEDoL3mJjYBzOS","Request");var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i="GET",c="POST",s="PUT",a=function(e,t,n){var i=new XMLHttpRequest;i.onreadystatechange=function(){4==i.readyState&&(i.status>=200&&i.status<400?n(JSON.parse(i.responseText)):n(new Error("Response Error")))},i.open(e,t.url,!0),i.setRequestHeader("Accept","application/json"),i.setRequestHeader("content-type","application/json"),i.setRequestHeader("Access-Control-Allow-Origin","*"),i.setRequestHeader("session_id","50ff2f01-28c0-48c6-81cd-efaae11c2d48");var c=t.data;"object"==(void 0===c?"undefined":o(c))&&(c=JSON.stringify(c)),i.send(c)};t.exports={get:function(e,t){a(i,e,t)},post:function(e,t){a(c,e,t)},put:function(e,t){a(s,e,t)}},cc._RF.pop()},{}]},{},["Business","Bullet","Fish","FishingJoy","EggsContainerForce","LockyEggs","LayerResult","LayerSubscribe","Config","Request"]);