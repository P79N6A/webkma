<!--pages/overview/overview.wxml-->
<block wx:if="{{isLoding==false}}">
  <block wx:if="{{!!employeeId && employeeId!==''}}">
    <view class='overview-container' wx:if="{{userInfo.name}}">
      <!-- 顶部 -->
      <view class="hearder" style='margin-bottom: {{userType == "boss" ? "338rpx":"198rpx"}};'>
        <view class='user-dashord flex align-items-center justify-content-between'>
          <view class='flex_item'>
            <image class='user-img' src="{{userInfo.face}}"></image>
          </view>
          <view class='flex_item user-info'>
            <view class='font-32'>{{userInfo.name}}</view>
            <view class='font-24'>{{userInfo.job || '暂无职位'}}</view>
            <view  class='font-24' style='margin:5rpx 0 8rpx;'>{{userInfo.phone || '暂无手机号'}}</view>
            <view wx:if="{{!!userInfo.version}}">
              <view class="certi-logo pull-left">
                <view class="logo-wrap">
                  <image src="{{userInfo.versionLogo}}"></image>
                </view>
                <view class="pull-left eplipes" style='max-width:140rpx;'>
                  {{userInfo.version}}
                </view>
              </view>
              <text>{{userInfo.company}}</text>
            </view>
          </view>
          <view class='flex_item'>
            <button-form-id bind:click="toCardDeatil">
              <icon type="icon-next" />
            </button-form-id>
          </view>
        </view>
      </view>
      <!-- 员工数据 -->
      <view class='overview' wx:if="{{userType != 'boss'}}">
        <view class='flex justify-content-between'>
          <view class='flex_item row_title_left'>
            <image class='icon' src='/images/icon-promotion.png'></image>
            <text>我的营销</text>
          </view>
          <button-form-id bind:click="createReport">
            <view class='flex_item row_title_right'>生成营销报表</view>
          </button-form-id>
        </view>
        <view class='flex justify-content-between my-data'>
          <view class='flex_item'>
            <view>
              <button-form-id bind:click="">
                <a href="javascript:;" class="link_text font-24 ">我的奖励</a>
              </button-form-id>
            </view>
            <view class='surplus'>
              <text class='font-24'>￥</text>{{dashbord.totalAward}}</view>
          </view>
          <view class='flex_item data-list'>
            <view class='flex_item'>
              <view>
                <button-form-id bind:click="queryAllTask">
                  <a href="javascript:;" class="link_text font-24 ">我的任务</a>
                </button-form-id>
              </view>
              <view class='number'>{{dashbord.empTaskCount}}</view>
            </view>
            <view class='flex_item line'></view>
            <view class='flex_item'>
              <view>
                <button-form-id bind:click="">
                  <a href="javascript:;" class="link_text font-24">营销力</a>
                </button-form-id>
              </view>
              <view class='number'>{{dashbord.empMarketPower}}</view>
            </view>
            <view class='flex_item line'></view>
            <view class='flex_item'>
              <view>
                <button-form-id bind:click="">
                  <a href="javascript:;" class="link_text font-24">排名</a>
                </button-form-id>
              </view>
              <view class='number {{dashbord.empMarketRank == -1 ? "small-number" : ""}}'>{{dashbord.empMarketRank == -1 ? '暂无' : dashbord.empMarketRank}}</view>
            </view>
          </view>
        </view>
      </view>
      <!-- boss数据 -->
      <view class='overview boss-overview' wx:else>
        <view class='flex justify-content-between'>
          <view class='flex_item row_title_left'>
            <image class='icon' src='/images/icon-promotion.png'></image>
            <text>BOSS看板</text>
          </view>
          <button-form-id bind:click="toBossReport">
            <view class='flex_item row_title_right'>生成BOSS报表</view>
          </button-form-id>
        </view>
        <view class='flex justify-content-between my-data'>
          <view class='flex_item'>
            <view>
              <button-form-id bind:click="">
                <a href="javascript:;" class="link_text font-24">我的奖励</a>
              </button-form-id>
            </view>
            <view class='surplus'>
              <text class='font-24'>￥</text>{{dashbord.totalAward}}</view>
          </view>
          <view class='flex_item data-list'>
            <view class='flex_item'>
              <view>
                <button-form-id bind:click="queryAllTask">
                  <a href="javascript:;" class="link_text font-24">我的任务</a>
                </button-form-id>
              </view>
              <view class='number' bindtap='queryAllTask'>+{{dashbord.empTaskCount}}</view>
            </view>
            <view class='flex_item line'></view>
            <view class='flex_item'>
              <view>
                <button-form-id bind:click="">
                  <a href="javascript:;" class="link_text font-24">营销力</a>
                </button-form-id>
              </view>
              <view class='number'>{{dashbord.empMarketPower}}</view>
            </view>
            <view class='flex_item line'></view>
            <view class='flex_item'>
              <view>
                <button-form-id bind:click="">
                  <a href="javascript:;" class="link_text font-24">排名</a>
                </button-form-id>
              </view>
              <view class='number {{dashbord.empMarketRank == -1 ? "small-number" : ""}}'>{{dashbord.empMarketRank == -1 ? '暂无' : dashbord.empMarketRank}}</view>
            </view>
          </view>
        </view>
        <view class='flex justify-content-between my-data'>
          <view class='flex_item'>
            <view>
              <button-form-id bind:click="">
                <a href="javascript:;" class="link_text font-24">企业订单总额</a>
              </button-form-id>
            </view>
            <view class='surplus'>
              <text class='font-24'>￥</text>{{dashbord.orderTotalCost}}</view>
          </view>
          <view class='flex_item data-list'>
            <view class='flex_item'>
              <view>
                <button-form-id bind:click="toBossTaskPage" data-type="boss">
                  <a href="javascript:;" class="link_text font-24">企业任务</a>
                </button-form-id>
              </view>
              <view class='number' bindtap='toBossTaskPage' data-type="boss">+{{dashbord.merchantTaskCount}}</view>
            </view>
            <view class='flex_item line'></view>
            <view class='flex_item'>
              <view>
                <button-form-id bind:click="jumpEmployeeList">
                  <a href="javascript:;" class="link_text font-24">企业员工</a>
                </button-form-id>
              </view>
              <view class='number' bindtap='jumpEmployeeList'>+{{dashbord.merchantEmpCount}}</view>
            </view>
            <view class='flex_item line'></view>
            <view class='flex_item'>
              <view>
                <button-form-id bind:click="jumpCustomerList">
                  <a href="javascript:;" class="link_text font-24">企业客户</a>
                </button-form-id>
              </view>
              <view class='number' bindtap='jumpCustomerList'>+{{dashbord.merchantCustomerCount}}</view>
            </view>
          </view> 
        </view>
      </view>
      <!-- 客户总览模块 -->
      <custom-overview wx:if="{{customer.list.length>0}}" title="TA的客户" where="home" count="{{customer.count}}" listData="{{customer.list}}"></custom-overview>
      <!-- 今日待办 -->
      <view class='task-list'>
        <view class='task-list-hearder flex justify-content-between'>
          <view class='flex_item row_title_left'>
            <image class='icon' src='/images/icon-deal-record.png'></image>
            <text>今日待办</text>
          </view>
          <button-form-id bind:click="openConditionlist">
            <view class='flex_item row_title_right'>
              <text class='font-24'>{{task.conditionTxt}}</text>
              <icon type='icon-zhankai1'></icon>
            </view>
          </button-form-id>
        </view>
        <view wx:for="{{task.list}}" wx:key="index" wx:if="{{task.list.length> 0 && index < 10}}">
          <task-list-item item="{{item}}" urls="{{task.urls}}" bind:itemDataEvent="itemDataEvent"></task-list-item>
        </view>
        <button-form-id bind:click="queryAllTask" wx:if="{{task.total>10}}">
          <i-load-more  i-class="my-load-more" tip="查看全部待办事项 >" loading="{{false}}" />
        </button-form-id>
        <!-- <view wx:if="{{task.list.length==0}}" class="nullData">暂无数据</view> -->
        <view wx:if="{{task.list.length==0}}" class='color-gray font-30 place-text' style='border:none;'>- 暂无数据 -</view>
        <i-load-more i-class="my-load-more" tip="这是我的底线了" loading="{{false}}" wx:else/>
      </view>
    </view>
    <view wx:if="{{!!userData}}">
      <employ-report showModal="{{showModal}}" userData="{{userData}}" bind:parentEvent="parentEvent"></employ-report>
      <!-- <boss-report showModal="{{showModal}}" userData="{{userData}}" bind:parentEvent="parentEvent"></boss-report> -->
    </view>
  </block>
  <block wx:else>
    <view class='default-img' style='background-image:url("https://resource.tuixb.cn/beta/00000000-0000-0000-0000-000000000000/KMA/miniapp/default-ribao.png");'>
    </view>
  </block>
</block>
<block wx:else></block>
<share-menu wx:if="{{isShare}}" currActivity="{{currActivity}}" bind:shareEvent='shareEvent'></share-menu> 